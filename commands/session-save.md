---
description: Save current session context for automatic resumption
allowed-tools: [Bash, Write]
---

# /session-save - Save Session Context

**PURPOSE**: Capture current session state, tasks, and decisions for automatic loading on next session start.

**EXPECTED OUTCOME**: Create `.claude-session-context.md` that SessionStart hook will auto-load.

---

## Step 1: Gather Session Information

**Collect from user:**

Use AskUserQuestion to gather context:

```javascript
AskUserQuestion({
  questions: [
    {
      question: "What were you working on this session?",
      header: "Session Focus",
      multiSelect: false,
      options: [
        {
          label: "iOS app development",
          description: "Swift, SwiftUI, Xcode work"
        },
        {
          label: "Web app features",
          description: "Next.js, React, UI components"
        },
        {
          label: "Design system work",
          description: "Design commands, inspiration, briefs"
        },
        {
          label: "Infrastructure/tooling",
          description: "Build, deploy, CI/CD"
        }
      ]
    }
  ]
})
```

**Then ask for details:**

"Please summarize in 2-3 sentences:
- What you accomplished this session
- What you're planning to work on next
- Any important decisions or blockers"

---

## Step 2: Analyze Current State

**Check git status:**
```bash
git status --short
git log --oneline -5
```

**Check for active tasks:**
- Modified files
- Uncommitted changes
- Recent commits

---

## Step 3: Generate Session Context File

**Create `.claude-session-context.md`:**

```markdown
# Session Context - [DATE]

**Last Updated:** [TIMESTAMP]
**Session Focus:** [What user said they were working on]

---

## Current Tasks

[What user said they're working on / planning next]

---

## Recent Work

[From git log and user description]

**Modified Files:**
[From git status]

**Recent Commits:**
[From git log]

---

## Decisions & Context

[Important decisions or blockers mentioned by user]

---

## Next Session

When you return:
- [Task 1 from user's "planning to work on next"]
- [Task 2]
- [Task 3]

---

## Project Context

**Project:** PeptideFox v2
**Stack:** Next.js, TypeScript, TailwindCSS
**Build Tool:** Bun
**Deploy:** Cloudflare Pages

---

_Auto-generated by /session-save_
_This file is automatically loaded by SessionStart hook_
```

**Write the file:**

```bash
Write(.claude-session-context.md, [generated content])
```

---

## Step 4: Confirm Success

```
âœ… SESSION SAVED

Context saved to: .claude-session-context.md
Auto-loads on: Next session start via SessionStart hook

What was saved:
- Session focus: [focus area]
- Current tasks: [task count]
- Git status: [X modified files, Y commits]
- Next steps: [planned work]

Next time you open Claude Code in this project, this context
will automatically load - no need to re-explain!

Tip: Run /session-save before ending long sessions to preserve context.
```

---

## Edge Cases

**If no user input:**
- Use git history as primary source
- Extract context from recent commits
- Note: "Auto-generated from git history"

**If file exists:**
- Append new session info
- Keep history of last 3 sessions
- Mark each with timestamp

**If git dirty state:**
- Include uncommitted work in context
- Note which files have unsaved changes
