# DESIGN_RULES.md Template

**Last Updated:** [Auto-updated by /agentfeedback --learn]
**Purpose:** Automatically enforce design/workflow rules to prevent repeated violations
**Platform:** [Web / iOS / Android / React Native / Multi-platform]

---

## Platform Context

**This project is:** [iOS app / Web app / Android app / React Native app / Multi-platform]

**Design guide origin:** [e.g., "OBDN website (CSS/web-based)"]

**What applies cross-platform:**
- Typography principles (hierarchy, which fonts for what)
- Font weight authorization
- Color principles (accent usage, contrast)
- Alignment rules (optical balance)
- Information architecture principles

**What is platform-specific:**
- Spacing/sizing values (web px ‚â† iOS pt ‚â† Android dp)
- Grid systems (web: custom, iOS: 8pt, Android: 8dp)
- Touch targets (web: clickable, iOS: 44pt, Android: 48dp)
- Typography systems (web: custom, iOS: SF Pro, Android: Roboto)

---

## How This File Works

This file is automatically generated and updated by the `/agentfeedback --learn` command.

When you use `/agentfeedback --learn [feedback]`:
1. System extracts structured rules from your feedback
2. Adds them to this file with adherence level annotations
3. Creates **platform-appropriate** validation checks
4. Tracks violation occurrences

Rules accumulate over time as patterns emerge from your feedback.

**Platform-aware enforcement:** Rules automatically adapt based on detected platform (iOS/Android/Web/etc.)

---

## How Adherence Levels Work

When starting design/UI work, you'll be asked TWO questions:

### 1. Design Guide Adherence (1-5)
**"How strictly should I follow YOUR design system?"**

- **5 - Zero deviation**: Strict compliance, MVP speed, follow all rules exactly
- **4 - Colors only**: Can experiment with color palette, everything else strict
- **3 - Colors + Typography**: Can play with fonts/weights/sizes
- **2 - Significant freedom**: Colors + typography + spacing + layouts flexible
- **1 - Go nuts**: Maximum creative freedom, minimal rules enforced

### 2. Inspiration Adherence (1-5)
**"How closely should I follow EXTERNAL examples?"**

- **5 - Copy exactly**: Pixel-perfect recreation of example
- **4 - Follow closely**: Follow layout/structure, adapt details
- **3 - Take pattern**: Take approach/pattern, make it your own
- **2 - Study concept**: Study principle, apply differently
- **1 - Just for taste**: Aesthetic reference only, inform thinking

---

## Typography Rules

### [Rule Name]
**Applies to:** Levels X-Y (strict enforcement)
**Added:** [date] (violation occurred N times)

**Rule:** [Description of the rule]

**Validation:**
```bash
[bash command to check compliance]
# Expected: [expected result]
```

**Why:** [Explanation of why this rule exists]

**Adherence flexibility:**
- Levels 5-X: STRICT (must follow exactly)
- Levels Y-1: [Flexibility description]

**Example violation:**
```css
/* ‚ùå WRONG */
font-weight: 300;

/* ‚úÖ CORRECT */
font-weight: 400;
```

---

## Spacing Rules

### [Rule Name]
**Applies to:** Levels X-Y
**Added:** [date]

**Rule:** [Description of the rule]

**Validation:**
```bash
[bash command to check compliance]
```

**Adherence flexibility:**
- Levels 5-X: STRICT (tokens only)
- Level Y: Can explore alternatives
- Level 1: Free exploration

---

## Color Rules

### [Rule Name]
**Applies to:** Levels X-Y
**Added:** [date]

**Rule:** [Description of the rule]

**Validation:**
```bash
[bash command to check compliance]
```

**Adherence flexibility:**
- Levels 5-X: STRICT (tokens only)
- Levels Y-1: Can experiment but maintain WCAG ratios

---

## Workflow Rules (ALL LEVELS)

### BEFORE Building UI/UX Work
**Applies to:** ALL levels (non-negotiable)
**Added:** [date] (violation occurred N times)

**Required steps:**
1. **Search for similar pages** in codebase (`glob`, `ls`)
2. **Show found examples** to user
3. **Ask:** "Is [example] a good reference to base this on?"
4. **Ask:** "Do you want to provide inspiration via /inspire?"
5. **Ask:** "Design guide adherence (1-5)?"
6. **Ask:** "Inspiration adherence (1-5)?"
7. **Study reference implementations** (Read files)
8. **Brainstorm** creative approaches within constraints
9. **Show concept/approach** to user
10. **Get approval** before building

**Validation:** Manual verification - agent must show evidence of steps 1-7

**Why:** [Explanation - e.g., "Prevents 'lazy as fuck' implementations that skip research phase. Design work ‚â† dev work."]

---

### [Other Workflow Rule]
**Applies to:** ALL levels
**Added:** [date]

**Rule:** [Description]

**Validation:** [How to verify compliance]

---

## Information Architecture Rules (ALL LEVELS)

### Content Hierarchy
**Applies to:** ALL levels
**Added:** [date]

**Rule:** Most important content = most prominent placement

**Principle:** [Description of hierarchy principle for this project]

**Anti-pattern:** [Description of what NOT to do]

**Validation:** Manual review - primary content must be immediately visible

---

### Progressive Disclosure
**Applies to:** ALL levels
**Added:** [date]

**Rule:** Show essential information first, details on demand

**Pattern:**
- Hero section: Overview/quick-view of key info
- Smart defaults: Most urgent/common content visible by default
- Expandable sections: Additional details available without dominating

**Example:** [Project-specific example]

---

## Code Quality Rules

### [Rule Name]
**Applies to:** [Levels]
**Added:** [date]

**Rule:** [Description]

**Validation:**
```bash
[bash command or manual check]
```

---

## Violation Tracking

This section records when rules were violated to show patterns:

### [Date]: [Rule Name]
- **File:** [file path]
- **Violation:** [description of what was wrong]
- **Impact:** [consequences - e.g., "User had to manually correct (3rd time)", "Complete redesign required"]

### [Date]: [Another Violation]
- **File:** [file path]
- **Violation:** [description]
- **Impact:** [consequences]

---

## Auto-Enforcement Checklist

**Before presenting work, verify:**

### Typography (Levels 5-3):
- [ ] [Check 1 description]
- [ ] [Check 2 description]
- [ ] [Check 3 description]

### Spacing (Levels 5-3):
- [ ] [Check 1 description]
- [ ] [Check 2 description]

### Colors (Levels 5-4):
- [ ] [Check 1 description]

### Workflow (ALL levels):
- [ ] Searched for similar pages before building
- [ ] Asked user about references
- [ ] Asked about /inspire usage
- [ ] Got adherence levels (design + inspiration)
- [ ] Studied reference implementations
- [ ] Showed concept before building
- [ ] Got approval on approach

### Information Architecture (ALL levels):
- [ ] Primary content is hero (immediately visible)
- [ ] Progressive disclosure implemented
- [ ] Content hierarchy not inverted

### Quality (ALL levels):
- [ ] Build successful (0 errors, 0 warnings)
- [ ] Code review passed
- [ ] Visual review passed (if UI work)

---

## Usage in Workflow

### When Starting Design/UI Work:

1. **Read this file:** `Read DESIGN_RULES.md`
2. **Follow workflow rules** (search, ask, study, show, approve)
3. **Get adherence levels** from user (design 1-5, inspiration 1-5)
4. **Apply appropriate rules** based on adherence level
5. **Run validation checks** before claiming complete
6. **Show evidence** of rule compliance

### When --learn Flag Used:

1. **Extract new rules** from user feedback
2. **Update this file** with new rules and violation tracking
3. **Create validation checks** for automated enforcement
4. **Show user** what rules were extracted and how they'll be enforced

---

## Platform-Specific Rules

### Cross-Platform Rules (Apply to ALL platforms)

**Typography Hierarchy:**
- [Rule description]
- Applies to: iOS, Android, Web, React Native

**Font Weights:**
- [Rule description - e.g., "Supreme LL ONLY 400 weight"]
- Applies to: ALL platforms (if font is used)

**Color Principles:**
- [Rule description - e.g., "Accent < 10% of interface"]
- Applies to: ALL platforms

**Alignment:**
- [Rule description - e.g., "Optical balance, no misaligned items"]
- Applies to: ALL platforms

### Platform-Specific Rules

**For Web Projects Only:**
- Spacing: Use var(--space-X) tokens from 4px grid
- Colors: Use var(--color-X) tokens
- Grid: Custom grid system (4px/8px)

**For iOS Projects Only:**
- Spacing: Use 8pt grid (not px values)
- Touch Targets: 44pt minimum
- Typography: SF Pro or custom fonts with iOS scales
- Grid: 8pt system

**For Android Projects Only:**
- Spacing: Use 8dp grid
- Touch Targets: 48dp minimum
- Typography: Roboto or custom fonts with Material scales
- Grid: Material Design 8dp system

---

## Automated Validation Script Example (Platform-Aware)

```bash
#!/bin/bash

# Read this file and user's adherence level
DESIGN_RULES_FILE="./DESIGN_RULES.md"
ADHERENCE_LEVEL=$1  # Pass as argument: ./validate.sh 5

if [ ! -f "$DESIGN_RULES_FILE" ]; then
  echo "No DESIGN_RULES.md found - skipping validation"
  exit 0
fi

# Detect platform
if [ -f "*.xcodeproj" ] || [ -f "*.swift" ]; then
  PLATFORM="iOS"
elif [ -f "*.java" ] || [ -f "*.kt" ]; then
  PLATFORM="Android"
elif [ -f "package.json" ]; then
  PLATFORM="Web"
else
  PLATFORM="Unknown"
fi

echo "üîç Running DESIGN_RULES.md validation"
echo "Platform: $PLATFORM"
echo "Adherence Level: $ADHERENCE_LEVEL"

VIOLATIONS=0

# Cross-platform checks
echo "Running cross-platform checks..."

# Typography hierarchy (manual check - platform-agnostic principle)
echo "‚úì Typography hierarchy check (manual): Verify proper font usage for purpose"

# Font weights (if applicable to platform)
echo "‚úì Font weights check (manual): Verify authorized weights used"

# Color principles (manual check - concept applies to all platforms)
echo "‚úì Color principles check (manual): Verify accent usage, contrast maintained"

# Alignment (manual check - applies to all platforms)
echo "‚úì Alignment check (manual): Verify optical balance, no misaligned items"

# Platform-specific checks
if [ "$PLATFORM" = "Web" ]; then
  echo "Running web-specific checks..."

  # Typography checks (levels 5-3)
  if [ "$ADHERENCE_LEVEL" -ge 3 ]; then
    # Example: Check for unauthorized font weights in CSS
    if grep -rE 'font-weight: 300' app/ --include="*.css" --include="*.module.css" -q; then
      echo "‚ùå Typography violation: Unauthorized font-weight 300 found"
      VIOLATIONS=$((VIOLATIONS + 1))
    fi
  fi

  # Spacing checks (levels 5-3, WEB ONLY)
  if [ "$ADHERENCE_LEVEL" -ge 3 ]; then
    if grep -rE 'padding: [0-9]+px|margin: [0-9]+px' app/ --include="*.css" | grep -v 'var(--space' -q; then
      echo "‚ùå Spacing violation: Arbitrary pixel values found (must use var(--space-X))"
      VIOLATIONS=$((VIOLATIONS + 1))
    fi
  fi

  # Color checks (levels 5-4, WEB ONLY)
  if [ "$ADHERENCE_LEVEL" -ge 4 ]; then
    if grep -rE 'rgba\(|#[0-9a-fA-F]{3,6}' app/ --include="*.css" | grep -v 'var(--color' -q; then
      echo "‚ùå Color violation: Hardcoded colors found (must use var(--color-X) tokens)"
      VIOLATIONS=$((VIOLATIONS + 1))
    fi
  fi

  # Build check
  if ! npm run build > /dev/null 2>&1; then
    echo "‚ùå Build failed"
    VIOLATIONS=$((VIOLATIONS + 1))
  fi

elif [ "$PLATFORM" = "iOS" ]; then
  echo "Running iOS-specific checks..."

  # iOS checks are mostly manual (Swift code, not grep-able patterns)
  echo "‚úì iOS 8pt grid usage (manual): Verify spacing uses 8pt system"
  echo "‚úì Touch targets (manual): Verify 44pt minimum for tappable elements"
  echo "‚úì Typography (manual): Verify SF Pro or custom fonts with iOS scales"

  echo "‚è≠Ô∏è  Skipping web-specific checks (CSS tokens, px values)"

  # Build check (iOS)
  if ! xcodebuild -project *.xcodeproj -scheme * build > /dev/null 2>&1; then
    echo "‚ùå Build failed"
    VIOLATIONS=$((VIOLATIONS + 1))
  fi

elif [ "$PLATFORM" = "Android" ]; then
  echo "Running Android-specific checks..."

  echo "‚úì Material Design 8dp grid (manual)"
  echo "‚úì Touch targets (manual): Verify 48dp minimum"

  echo "‚è≠Ô∏è  Skipping web-specific checks"

fi

# Summary
echo ""
if [ "$VIOLATIONS" -eq 0 ]; then
  echo "‚úÖ All platform-appropriate DESIGN_RULES.md checks passed"
  echo "Platform: $PLATFORM | Adherence Level: $ADHERENCE_LEVEL"
  exit 0
else
  echo "‚ùå $VIOLATIONS violation(s) found"
  echo "Platform: $PLATFORM | Adherence Level: $ADHERENCE_LEVEL"
  exit 1
fi
```

---

**This file prevents repeating the same mistakes. Rules accumulate over time as patterns emerge from feedback.**

**To use this template:**
1. Copy to project root as `DESIGN_RULES.md`
2. Run `/agentfeedback --learn [feedback]` to populate with actual rules
3. System will automatically add rules, violations, and validation checks
4. Agents will automatically read and enforce based on adherence level
